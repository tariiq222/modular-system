# توثيق واجهة برمجة التطبيقات (API) باستخدام Swagger

تم تنفيذ توثيق واجهة برمجة التطبيقات (API) باستخدام Swagger في هذا المشروع. يوفر Swagger واجهة رسومية تفاعلية تساعد في فهم واختبار نقاط النهاية (Endpoints) المتاحة في النظام.

## الخطوات التي تم تنفيذها

1. إعداد Swagger في ملف `main.ts`:
   - تم إضافة `SwaggerModule` و `DocumentBuilder` من حزمة `@nestjs/swagger`
   - تم تكوين Swagger مع عنوان ووصف مناسب للنظام
   - تم إضافة دعم المصادقة باستخدام JWT من خلال `addBearerAuth`
   - تم إضافة العلامات (Tags) الرئيسية للنظام لتنظيم نقاط النهاية

2. توثيق نماذج البيانات (DTOs):
   - تم إضافة زخارف `ApiProperty` و `ApiPropertyOptional` لتوثيق خصائص النماذج
   - تم إضافة أوصاف وأمثلة للخصائص لتسهيل فهمها
   - تم توثيق أنواع البيانات مثل التعدادات (Enums) والتواريخ (Dates)

3. توثيق وحدات التحكم (Controllers):
   - تم إضافة زخارف `ApiTags` لتصنيف وحدات التحكم
   - تم إضافة `ApiBearerAuth` لتحديد متطلبات المصادقة
   - تم توثيق كل طريقة باستخدام `ApiOperation` لوصف الغرض منها
   - تم توثيق الاستجابات المختلفة باستخدام `ApiResponse`
   - تم توثيق المعلمات باستخدام `ApiParam` و `ApiQuery`
   - تم توثيق متطلبات الجسم باستخدام `ApiBody`

## الوحدات التي تم توثيقها

- **وحدة الملفات الشخصية (Profiles)** - تم توثيق:
  - نموذج إنشاء ملف شخصي (CreateProfileDto)
  - طرق الحصول على الملف الشخصي وتحديثه
  - طرق رفع الصورة الشخصية
  - طرق إدارة التفضيلات
  - طرق الحصول على النشاطات

- **وحدة الصلاحيات (Permissions)** - تم توثيق:
  - طرق إدارة الأدوار (إنشاء، تحديث، حذف)
  - طرق إدارة الصلاحيات للأدوار
  - طرق تهيئة الأدوار الافتراضية

## كيفية الوصول إلى توثيق Swagger

بعد تشغيل التطبيق، يمكن الوصول إلى توثيق Swagger من خلال الرابط التالي:

```
http://localhost:3000/api/docs
```

## الخطوات المتبقية للتوثيق

لإكمال توثيق جميع وحدات النظام، يجب إضافة زخارف Swagger إلى:

1. **وحدة المستخدمين (Users)**:
   - توثيق نماذج بيانات المستخدمين
   - توثيق طرق إدارة المستخدمين

2. **وحدة المصادقة (Auth)**:
   - توثيق عمليات تسجيل الدخول والخروج
   - توثيق عمليات تسجيل مستخدم جديد
   - توثيق عمليات إعادة تعيين كلمة المرور

3. **وحدات أخرى**:
   - إكمال توثيق الوحدات المتبقية في النظام

## نصائح للتوثيق الفعال

1. استخدم أوصافًا واضحة ومفهومة لكل نقطة نهاية
2. أضف أمثلة للطلبات والاستجابات لتسهيل الفهم
3. وثق جميع حالات الخطأ المحتملة مع رموز الاستجابة المناسبة
4. استخدم الفئات (Tags) لتنظيم نقاط النهاية بشكل منطقي
5. استخدم `@ApiSecurity` لتوثيق متطلبات الأمان الإضافية مثل مفاتيح API

## مصادر مفيدة

- [توثيق NestJS الرسمي لـ Swagger](https://docs.nestjs.com/openapi/introduction)
- [مواصفات OpenAPI](https://swagger.io/specification/)